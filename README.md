WIP

Missing almost everything, just organizing the logic